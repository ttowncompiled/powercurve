<html>
  
  <head>
    <title>Power Curve</title>
    
    <!-- Load Dependencies -->
    
    <!-- Angular 2.1 beta -->
    <script src="node_modules/angular2/bundles/angular2-polyfills.js"></script>
    <script src="node_modules/systemjs/dist/system.src.js"></script>
    <script src="node_modules/rxjs/bundles/Rx.js"></script>
    <script src="node_modules/angular2/bundles/angular2.dev.js"></script>
    
    <!-- Flot -->
    <script src="node_modules/flot/jquery.js"></script>
    <script src="node_modules/flot/jquery.flot.js"></script>
    
    <!-- Materialize -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="node_modules/materialize-css/dist/css/materialize.css" media="screen,projection">
    <script src="node_modules/materialize-css/dist/js/materialize.js"></script>
    
    <!-- Load bootstrap file -->
    <script>
      
      // DOM function for manipulating the plot
      function UPDATE_PLOT(annotated_data) {
        // plots the data
        $.plot($("#placeholder"),
            annotated_data,
            {
              legend: {
                container: $("#legend"),
                noColumns: 2
              },
              series: {
                lines: {
                  show: true
                },
                points: {
                  show: true
                }
              },
              grid: {
                hoverable: true,
                clickable: true
              },
              yaxis: {
                min: 0,
                max: 1
              }
            }
        );

        // creates the tooltip to display the y point
        $("<div id='tooltip'></div>").css({
            position: "absolute",
            display: "none",
            border: "1px solid #fdd",
            padding: "2px",
            "background-color": "#fee",
            opacity: 0.80
        }).appendTo("body");

        // displays the tooltip on hover
        $("#placeholder").bind("plothover", function (event, pos, item) {
            if (item) {
              var x = item.datapoint[0].toFixed(2),
                y = item.datapoint[1].toFixed(2);
              $("#tooltip").html(y)
                .css({top: item.pageY+5, left: item.pageX+5})
                .fadeIn(200);
            } else {
              $("#tooltip").hide();
            }
        });
        
        // enable side nav for the legend
        $('.button-collapse').sideNav();
      }
      
      // configurations for importing  modules through System.js
      System.config({
        packages: {        
          app: {
            format: 'register',
            defaultExtension: 'js'
          }
        }
      });
      
      // import the boot module to bootstrap all of the components
      System.import('app/boot')
            .then(null, console.error.bind(console));
            
    </script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  </head>
  
  <body>
    
    <!-- Nav bar -->
    <nav>
      <!-- Top bar for title and nav links -->
      <div class="nav-wrapper amber">
        <span class="brand-logo" style="margin-left:5px">Combat Power Curve</span>
        <ul id="nav-mobile" class="right hide-on-med-and-down">
          <li><a href="#">Combat</a></li>
        </ul>
      </div>
      <!-- Side nav for the plot legend -->
      <ul id="slide-out" class="side-nav">
        <div class="container">
          <div class="row">
            <div class="col s3">
              <div id="legend"></div>
            </div>
          </div>
        </div>
      </ul>
    </nav>
    
    <!-- Plot -->
    <div class="section">
      <div class="row">
        
        <!-- Diagram -->
        <div class="col s10">
          <div class="card-panel hoverable" style="height:80%;">
            <div id="placeholder" style="width:100%;height:100%;"></div>
          </div>
        </div>
        
        <!-- App -->
        <my-app>Loading...</my-app>

      </div>
    </div>  
    
  </body>
  
</html>